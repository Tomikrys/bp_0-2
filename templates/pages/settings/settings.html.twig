{% extends 'base.html.twig' %}
{% block title %}Nastavení{% endblock %}
{% block stylesheets %}
    <style>

    </style>
    {% endblock %}
{% block body %}
    <h1>Nastavení</h1>
    <h2>Dny na menu</h2>
        {% for day in settings.days %}
            <p>{{ day }}</p>
        {% endfor %}
    <h2>Jídla na menu</h2>
        {% for meal in settings.meals %}
            <p>{{ meal }}</p>
        {% endfor %}
    <h2>Typy jídel</h2>
        {% for type in types %}
            <p>{{ type.name }}</p>
        {% endfor %}
    <h2>Tagy jídel</h2>
        {% for tag in tags %}
            <p>{{ tag.name }}</p>
        {% endfor %}
    <h2>Import jídel</h2>
    <p>Jediný akceptovaný formát:<br><code>Název|Popis jídla|Cena|Typ|Tag|Tag</code><br>
    Počet tagů není omezen a nejsou povinné. Pokud tag či typ neexistuje je vytvořen.</p>
    <form action="javascript:void(0);">
        <textarea class="form-control" name="csv" rows="10"></textarea>
        <button onclick="importCSV(this.form)" type="submit" class="btn btn-primary mt-1 mb-2">Importovat</button>
    </form>
{% endblock %}

{% block javascripts %}
<script>
    function importCSV(form) {
        let csv = form.csv.value;
        alert(csv);
        fetch('/import', {
            method: 'POST', // or 'PUT'
            body: csv
        })
    }


</script>
{% endblock %}